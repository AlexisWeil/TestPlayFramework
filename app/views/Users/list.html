#{extends 'main.html' /}

Users' list :
<ul>
    #{list items:users, as:'user'}
        <li>${user.firstname} ${user.lastname}</li>
    #{/list}
</ul>

Add a new user :

#{form @Users.addUser()}
    <label for="AddUserFirstname">Firstname : </label>
    <input id="AddUserFirstname" type="text" name="user.firstname" value="${flash['user.firstname']}" />
    #{ifError 'user.firstname'}<span style="color: red;">Firstname is required</span>#{/ifError}<br/><br/>

    <label for="AddUserLastname">Lastname : </label>
    <input id="AddUserLastname" type="text" name="user.lastname" value="${flash['user.lastname']}"/>
    #{ifError 'user.lastname'}<span style="color: red;">Lastname is required</span>#{/ifError}<br/><br/>

    <input type="submit" value="Submit" id="AddUserSubmit" />
#{/form}

<script type="text/javascript">
    $(function() {
        $('#AddUserSubmit').click(function(event) {
            event.preventDefault();

            addUserAjax();
        });
    });

    function addUserAjax() {
        var addUserUrl = #{jsAction @Users.testUser(':firstname', ':lastname') /}

        var firstname = $('#AddUserFirstname').val();
        var lastname = $('#AddUserLastname').val();

        $.getJSON(
            addUserUrl({ firstname: firstname, lastname: lastname}),
            function(json) {
                alert(json);
            }
        );
    }
</script>